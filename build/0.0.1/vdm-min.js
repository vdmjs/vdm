!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Vdm=t():e.Vdm=t()}(this,function(){return function(e){function t(n){if(i[n])return i[n].exports;var r=i[n]={exports:{},id:n,loaded:!1};return e[n].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var i={};return t.m=e,t.c=i,t.p="",t(0)}([function(e,t,i){function n(){return v++}var r=i(1),s=i(2),o=i(19),a=i(20),l=i(8),c=i(9),u=i(26),h=i(18),d=i(25),f=i(27),p=i(3),v=0,_=function(e){this.$el=p.query(e.el),this.$data=e.data||{},this.$rootView=e.rootView?e.rootView:this,this.__template=e.template,this.__deepinject=1==e.deepinject,this.__dependViews=[],this.__watchers={},this.__userWatchers=e.watchers||{},this.__filters=e.filters||{},this.__dataCheckType=e.dataCheckType||r.dataCheckType,this.__vid=e.vid||n(),this.__rendered=!1,this._init()};p.assign(_.prototype,f),_.prototype._init=function(){var e=null;this.$el;this.fire("beforeMount"),this.$el.__VD__?e=this.$el:this.__template?(e=u.transfer(this.__template),this.$el.innerHTML=""):(e=u.transfer(this.$el.innerHTML),this.$el.innerHTML=""),"defineProperties"==this.__dataCheckType&&(this.$data=_.$inject(this.$data,this.__deepinject),this.__depend()),this.fire("beforeCompile"),this.$compile(e),this.fire("afterCompile"),this.$el.__VD__?this.__rendered=!0:(this.$el.innerHTML="",this.$el.appendChild(p.string2frag(e.mountView(this))),this.__rendered=!0,this.fire("afterMount"))},_.prototype.__depend=function(){var e=this,t=this.$data.__ori__||this.$data;p.each(t,function(t,i){e.__dependWatch(i)})},_.prototype.__dependWatch=function(e){var t=this;t.$watch(e,function(){t.__dependViews&&p.each(t.__dependViews,function(i){i.$data[e]=t.$data[e]})})},_.$inject=function(e,t){return h.inject(e,t)},_.$normalize=function(e){return h.normalize(e)},_.prototype.$nextTick=function(e,t){var t=t||this;return u.nextTick(e,t)},_.prototype.$flushUpdate=function(){return a.flushUpdate()},_.prototype.$digest=function(){this.__userWatchers&&p.each(this.__userWatchers,function(e){e.check()}),this.__watchers&&p.each(this.__watchers,function(e){e.check()})},_.prototype.$apply=function(){if("defineProperties"==this.__dataCheckType)this.$flushUpdate();else{if(_._isDigesting)return void setTimeout(p.bind(arguments.callee,this),0);_._isDigesting=!0,this.$digest(),_._isDigesting=!1}},_.prototype.$compile=function(e){s.parse(e,this)},_.prototype.$destroy=function(){p.each(this.__watchers,function(e){e.destroy()}),p.each(this.__userWatchers,function(e){e.destroy()}),this.$el&&this.$el.innerHTML&&(this.$el.innerHTML=""),this.$el=null,this.$data=null,this.$rootView=null,this.__template=null,this.__watchers=null,this.__userWatchers=null,this.__filters=null,this.isDestroyed=!0},_._isDigesting=!1,_.config=function(e){p.assign(r,e)},_.prototype.$directive=l.newDirective,_.prototype.$watch=function(e,t){var i;this.__userWatchers[e]?(i=this.__userWatchers[e],i.callbacks.push(t)):(i=new o(this,c.parseExpression(e),t),i.last=i.getValue(),i.isUserWatcher=!0,this.__userWatchers[e]=i)},_.createElement=d.createElement,_.createTextNode=d.createTextNode,_.Parser=c,_.Dom=u,_.Directive=l,_.Compile=s,_.Watcher=o,_.Data=h,_.Element=d,_.Util=p,e.exports=_},function(e,t){t.prefix="t",t.version="0.0.1",t.tagId="vdm-id",t.delimiters=["{{","}}"],t.unsafeDelimiters=["{{{","}}}"],t.defaultIterator="__INDEX__",t.debug=!1,t.dataCheckType="defineProperties"},function(e,t,i){function n(e){var t,i,n,r;return n=e.view,t=a.create(e),i=n.__watchers[e.value],i||(i=new l(n,e.expression),n.__watchers[e.value]=i),e.oneTime||i.__directives.push(t),t.__watcher=i,t.initialize&&t.initialize(),r=i.getValue(),i.last=r,t.bind(r),t}function r(e,i,r){var s,l,c;c=e===i.$el,r=r||[];var h=[],d=[];return o.each(r,function(t){a.isDirective(t)&&(s=u(t),s.view=i,s.el=e,s.block?d.push(s):h.push(s))}),!c&&d.length?void n(d[0]):(h.sort(function(e,t){return e=e.priority||100,t=t.priority||100,e>t?-1:e===t?0:1}),o.each(h,function(e){n(e)}),void(e.hasChildNodes()&&(l=o.toArray(e.childNodes),o.each(l,function(e){t.parse(e,i)}))))}function s(e,t){var i,r;i=h(e.data)[0],r=i.oneTime,i.type===c.TextTemplateParserTypes.binding&&n({name:"",value:i.value,view:t,expression:d(i.value),oneTime:r,directive:i.html?"html":"text",el:e})}var o=i(3),a=i(8),l=(i(18),i(19)),c=i(9),u=c.parseDirective,h=c.parseText,d=c.parseExpression;i(1);t.parse=function(e,t){o.isElement(e)&&(3==e.nodeType&&o.trim(e.data)&&s(e,t),1==e.nodeType&&"SCRIPT"!==e.tagName.toUpperCase()&&r(e,t,o.toArray(e.attributes)),-1==e.nodeType&&r(e,t,o.toArray(e.attributes)))}},function(e,t,i){var n={},r=i(4),s=i(5),o=i(6),a=s.assign;a(n,s),a(n,r),a(n,o),n.Class=i(7),e.exports=n},function(e,t,i){function n(e,t){var i=e.nodeType;return i&&s.inArray([1,8],i)?8===i&&s.trim(e.data)==="deleted-"+t?e:1===i&&e.getAttribute&&parseInt(e.getAttribute(TAG_ID))===t?e:null:!1}var r=i(1),s=i(5);TAG_ID=r.tagId,t.query=function(e){return e?s.isObject(e)&&1==e.__VD__?e:s.isElement(e)?e:s.isString(e)?document.getElementById(e.replace(/^#/,"")):void 0:null},t.walk=function(e,i){if(e.hasChildNodes())for(var n=0;n<e.childNodes.length&&i(e.childNodes[n])!==!1;n++)t.walk(e.childNodes[n],i)},t.queryPatId=function(e,i){var r=null;return t.walk(e,function(e){return n(e,i)?(r=e,!1):void 0}),r};var o=document.querySelector?function(e,t){return e.querySelector("["+TAG_ID+'="'+t+'"]')}:t.queryPatId;t.queryRealDom=function(e){var i=e.view.$rootView.$el,n=e.vdmId,r=null;if(e.deleted){var s;if(s=!e.parentNode||e.parentNode.__ROOT__||-1===e.parentNode.nodeType?i:o(i,e.parentNode.vdmId),!s)return null;r=t.queryPatId(s,n)}else r=o(i,n);return r},t.createAnchor=function(e,t){var i=r.debug?document.createComment(e):document.createTextNode(t?" ":"");return i},t.before=function(e,t){t.parentNode.insertBefore(e,t)},t.after=function(e,i){i.nextSibling?t.before(e,i.nextSibling):i.parentNode.appendChild(e)},t.remove=function(e){e.parentNode&&e.parentNode.removeChild(e)},t.prepend=function(e,i){i.firstChild?t.before(e,i.firstChild):i.appendChild(e)},t.isIe8=function(){return/MSIE\ [8]/.test(window.navigator.userAgent)};var a={area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],col:[2,"<table><colgroup>","</colgroup></table>"],legend:[1,"<fieldset>","</fieldset>"],option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],tr:[2,"<table>","</table>"],td:[3,"<table><tr>","</tr></table>"],g:[1,'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1">',"</svg>"],_default:[0,"",""]};a.th=a.td,a.optgroup=a.option,a.tbody=a.tfoot=a.colgroup=a.caption=a.thead,s.each("circle,defs,ellipse,image,line,path,polygon,polyline,rect,symbol,text,use".split(","),function(e){a[e]=a.g});var l=/<([\w:]+)/;t.string2node=function(e){return t.string2frag(e).childNodes[0]},t.string2frag=function(e){var i=document.createElement("div"),n=document.createDocumentFragment(),r=(l.exec(e)||["",""])[1].toLowerCase(),o=a[r]||a._default,c=o[0],u=o[1],h=o[2],d="";for(t.isIe8()&&(e=e.replace(/\<\!--([\w-\d]+)--\>/g,'<div id="__PAT__COMMENT">$1</div>')),i.innerHTML=u+s.trim(e)+h;c--;)i=i.lastChild;t.isIe8()&&t.walk(i,function(e){e.getAttribute&&"__PAT__COMMENT"==e.getAttribute("id")&&(d=e.innerHTML,e.parentNode&&""===e.parentNode.tagName&&(e=e.parentNode),t.replace(e,document.createComment(s.trim(d))))});for(var f;f=i.firstChild;)n.appendChild(f);return n},t.replace=function(e,t){var i=e.parentNode;i&&i.replaceChild(t,e)},t.nextTick=function(){function e(){n=!1;var e=i.slice(0);i=[];for(var t=0;t<e.length;t++)e[t]()}var t,i=[],n=!1;if("undefined"!=typeof MutationObserver){var r=1,s=new MutationObserver(e),o=document.createTextNode(r);s.observe(o,{characterData:!0}),t=function(){r=(r+1)%2,o.data=r}}else t=setTimeout;return function(r,s){var o=s?function(){r.call(s)}:r;i.push(o),n||(n=!0,t(e,0))}}()},function(e,t){function i(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])}t.bind=function(e,t){return function(i){var n=arguments.length;return n?n>1?e.apply(t,arguments):e.call(t,i):e.call(t)}},t.htmlspecialchars=function(e){return t.isString(e)?(e=e.replace(/</g,"&lt;"),e=e.replace(/>/g,"&gt;"),e=e.replace(/"/g,"&quot;"),e=e.replace(/'/g,"&#039;")):e},t.trim=function(e){return e.replace(/(^\s*)|(\s*$)/g,"")},t.toArray=function(e){if(!e||!e.length)return[];for(var t=[],i=0,n=e.length;n>i;i++)t.push(e[i]);return t};var n=Object.prototype.toString;t.isArray=function(e){return"[object Array]"===n.call(e)},t.isPlainObject=function(e){return"[object Object]"===n.call(e)},t.isObject=function(e){return"function"==typeof e||"object"==typeof e&&null!=e},t.isElement=function(e){return e&&"object"==typeof e&&e.nodeType},t.isString=function(e){return"[object String]"===Object.prototype.toString.call(e)},t.isNumber=function(e){return"[object Number]"===Object.prototype.toString.call(e)},t.toNumber=function(e){if("string"!=typeof e)return e;var t=Number(e);return isNaN(t)?e:t},t.stripQuotes=function(e){var t=e.charCodeAt(0),i=e.charCodeAt(e.length-1);return t!==i||34!==t&&39!==t?e:e.slice(1,-1)},t.each=function(e,i){if(t.isArray(e))for(var n=0,r=e.length;r>n;n++)i(e[n],n);else if(t.isObject(e))for(var s in e)i(e[s],s)},t.hasKey=function(e,t){for(var i in e)if(e.hasOwnProperty(i)&&i==t)return!0;return!1},t.inArray=function(e,i){var n=t.indexOf(e,i);return-1!==n},t.assign=function(){if(!(arguments.length<2)){for(var e,n=t.toArray(arguments),r=n.shift();e=n.shift();)i(r,e);return r}},t.indexOf=function(e,t){if(null===e)return-1;for(var i=0,n=e.length;n>i;i++)if(e[i]===t)return i;return-1},t.findAndRemove=function(e,i){var n=t.indexOf(e,i);~n&&e.splice(n,1)},t.findAndReplace=function(e,i,n){var r=t.indexOf(e,i);~r&&e.splice(r,1,n)},t.findAndReplaceOrAdd=function(e,i,n){var r=t.indexOf(e,i);~r?e.splice(r,1,n):e.push(n)},t.indexOfKey=function(e,t,i){if(null===e)return-1;for(var n=0,r=e.length;r>n;n++)if(e[n][t]===i)return n;return-1};var r=function(){return!1};t.deepClone=function(e,i){if(i=i||r,t.isPlainObject(e)){var n={};for(var s in e)e.hasOwnProperty(s)&&!i(s)&&(n[s]=t.deepClone(e[s],i));return n}if(t.isArray(e)){for(var n=new Array(e.length),o=0,a=e.length;a>o;o++)n[o]=t.deepClone(e[o],i);return n}return e}},function(e,t,i){i(1),i(5),void 0!==window.console&&console.log},function(e,t){var i=function(){function e(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])}var t=function(){this.initPrototype=!0;var i=new this;this.initPrototype=!1;for(var n,r=Array.prototype.slice.call(arguments)||[];n=r.shift();)e(i,n.prototype||n);var s=function(){!s.initPrototype&&this.init&&this.init.apply(this,arguments)};return s.prototype=i,s.prototype.constructor=s,s.extend=t,s},i=function(){};return i.extend=t,i}();e.exports=i},function(e,t,i){var n=i(3),r=n.Class,s=i(9),o=i(1);DIR_REGX=s.DIR_REGX,INTERPOLATION_REGX=s.INTERPOLATION_REGX;var a={bind:i(12),"class":i(13),model:i(14),"if":i(15),unless:i(16),"for":i(17),text:i(23),html:i(24)},l=function(){};uid=0;var c=r.extend({init:function(e){this.__watcher=null,this.describe=e,this.el=e.el,this.view=e.view,this.uid=uid++},shoudUpdate:function(e,t){return e!==t},initialize:l,bind:l,unbind:l,update:l,destroy:function(){this.unbind(),this.__watcher=null,this.describe=null,this.el=null,this.view=null,this.uid=null,this.isDestroyed=!0}}),u={};n.each(a,function(e,t){u[t]=c.extend(a[t])}),e.exports={__directives:a,publics:u,create:function(e){var t=u[e.directive];return new t(e)},isBlockDirective:function(e){var t=n.isString(e)?e:e.name;return t=t.split(":")[0].replace(o.prefix+"-",""),!(!a[t]||!a[t].block)},isDirective:function(e){var t,i,r;return t=e.name,(i=e.value)?INTERPOLATION_REGX.test(i)?!0:(r=t.match(DIR_REGX),!!(r&&r[1]&&n.hasKey(a,r[1].split(":")[0]))):!1},newDirective:function(e,t){a[e]=t,this.publicDirectives[e]=c.extend(t)}}},function(e,t,i){function n(e){return e.replace(c,"\\$&")}var r=i(1),s=i(3),o=i(10),a=i(11),l=r.prefix,c=(r.delimiters,/[-.*+?^${}()|[\]\/\\]/g),u=new RegExp("^"+l+"-([^=]+)"),h=/:(.*)$/,d=n(r.delimiters[0]),f=n(r.delimiters[1]),p=n(r.unsafeDelimiters[0]),v=n(r.unsafeDelimiters[1]),_=new RegExp(p+"(.+?)"+v+"|"+d+"(.+?)"+f,"g"),m=new RegExp("^"+p+".*"+v+"$"),g=new RegExp(p+"(.+?)"+v+"|"+d+"(.+?)"+f);t.parseDirective=function(e){var n,r,s,o,a=e.name,l=e.value;if(g.test(l))return r=t.parseText(l),{name:a,value:l,directive:"bind",args:[a],oneTime:!1,block:!1,expression:t.token2expression(r),isInterpolationRegx:!0};s=a.match(u)[1],h.test(s)&&(o=s.split(":"),s=o[0],n=o[1]?o[1].split("|"):[]);var c=i(8).__directives[s]||{};return{name:a,value:l,directive:s,args:n||[],oneTime:!1,block:c.block,priority:c.priority,expression:t.parseExpression(l)}},t.parseExpression=function(e){var t,i,n;return n=a.parse(e),n.expression?(i=s.trim(o.compileExpFns(n.expression)),t=n.filters||[],t.length>0&&(i="_that.applyFilter("+i+',"'+t.join(",")+'")'),i):""},TextTemplateParserTypes={text:0,binding:1},t.parseText=function(e){if(e=e.replace(/\n/g,""),!_.test(e))return[{type:TextTemplateParserTypes.text,value:e}];for(var t,i,n,r,o,a,l=[],c=_.lastIndex=0;t=_.exec(e);)i=t.index,i>c&&l.push({type:TextTemplateParserTypes.text,value:e.slice(c,i)}),n=m.test(t[0]),r=n?t[1]:t[2],o=r.charCodeAt(0),a=42===o,r=a?r.slice(1):r,l.push({type:TextTemplateParserTypes.binding,value:s.trim(r),html:n,oneTime:a}),c=i+t[0].length;return c<e.length&&l.push({type:TextTemplateParserTypes.text,value:e.slice(c)}),l},t.token2expression=function(e){var i=[];return s.each(e,function(e){e.type==TextTemplateParserTypes.text?i.push('"'+e.value+'"'):i.push("("+t.parseExpression(e.value)+")")}),i.join("+")},t.TAG_RE=_,t.INTERPOLATION_REGX=g,t.DIR_REGX=u,t.TextTemplateParserTypes=TextTemplateParserTypes},function(e,t,i){function n(e,t){var i=v.length;return v[i]=t?e.replace(h,"\\n"):e,'"'+i+'"'}function r(e){var t=e.charAt(0),i=e.slice(1);return a.test(i)?e:(i=i.indexOf('"')>-1?i.replace(f,s):i,t+"_scope."+i)}function s(e,t){return v[t]}var o=(i(3),"Math,Date,this,true,false,null,undefined,Infinity,NaN,isNaN,isFinite,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,parseInt,parseFloat"),a=new RegExp("^("+o.replace(/,/g,"\\b|")+"\\b)"),l="break,case,class,catch,const,continue,debugger,default,delete,do,else,export,extends,finally,for,function,if,import,in,instanceof,let,return,super,switch,throw,try,var,while,with,yield,enum,await,implements,package,proctected,static,interface,private,public",c=new RegExp("^("+l.replace(/,/g,"\\b|")+"\\b)"),u=/\s/g,h=/\n/g,d=/[\{,]\s*[\w\$_]+\s*:|('[^']*'|"[^"]*")|new |typeof |void /g,f=/"(\d+)"/g,p=/[^\w$\.]([A-Za-z_$][\w$]*(\.[A-Za-z_$][\w$]*|\['.*?'\]|\[".*?"\])*)/g,v=[];t.compileExpFns=function(e,t){c.test(e),v.length=0;var i=e.replace(d,n).replace(u,"");return i=(" "+i).replace(p,r).replace(f,s)}},function(e,t,i){function n(){var e=v.trim(r.slice(c,a));e&&(s.filters=s.filters||[]).push(e),c=a+1}var r,s,o,a,l,c,u,h,d,f,p,v=i(3);t.parse=function(e){for(r=e,u=h=!1,d=f=p=0,c=0,s={},a=0,l=r.length;l>a;a++)if(o=r.charCodeAt(a),u)39===o&&(u=!u);else if(h)34===o&&(h=!h);else if(124===o&&124!==r.charCodeAt(a+1)&&124!==r.charCodeAt(a-1))null==s.expression?(c=a+1,s.expression=v.trim(r.slice(0,a))):n();else switch(o){case 34:h=!0;break;case 39:u=!0;break;case 40:p++;break;case 41:p--;break;case 91:f++;break;case 93:f--;break;case 123:d++;break;case 125:d--}return null==s.expression?s.expression=v.trim(r.slice(0,a)):0!==c&&n(),s}},function(e,t,i){var n=i(3);e.exports={priority:3e3,bind:function(e){this.update(e)},update:function(e){var t,i;return t=this.describe.args||[],(i=t[0])?null!=e&&e!==!1?this.el.setAttribute(i,e):-1!==n.indexOf(["value","checked","selected"],i)?this.el.setAttribute(i,e):void this.el.removeAttribute(i):void 0}}},function(e,t,i){i(3);e.exports={priority:3500,bind:function(e){this.update(e)},update:function(e){var t,i;t=this.describe.args||[],i=t[0],i&&(null!=e&&e!==!1?this.el.addClass(i):this.el.removeClass(i))}}},function(e,t,i){var n=i(3);Util={bindEvent:function(){return"addEventListener"in window?function(e,t,i){return e.addEventListener(t,i,!1)}:function(e,t,i){return e.attachEvent("on"+t,i)}}(),unbindEvent:function(){return"removeEventListener"in window?function(e,t,i){return e.removeEventListener(t,i,!1)}:function(e,t,i){return i?e.detachEvent("on"+t,i):e.detachEvent("on"+t)}}(),getValue:function(e){return"checkbox"===e.type?e.checked:"SELECT"===e.tagName.toUpperCase?this._getSelectedValue(e):e.value},_getSelectedValue:function(e){for(var t,i,n,r=e.hasAttribute("multiple"),s=r?[]:null,o=0,a=e.options.length;a>o;o++)if(t=e.options[o],n=t.selected){if(i=t.value,!r)return i;s.push(i)}return s}};var r=function(){var e=this,t=Util.getValue(e.el.getElement()),i=e.describe.value;t!=e.curValue&&(e.view.orikeys&&n.inArray(e.view.orikeys,i)?e.setValue(i,t,e.view.$rootView.$data):e.setValue(i,t,e.view.$data))},s={text:{eventType:"keyup",callback:r,update:function(e){"safe"==this.describe.args[0]&&n.isString(e)&&(e=n.htmlspecialchars(e)),this.el.setAttribute("value",e)}},checkbox:{eventType:"click",callback:function(){var e=this,t=e.el.getElement(),i=e.__watcher.last;if(n.isArray(i)){var s=t.value;t.checked?n.indexOf(i,s)<0&&i.push(s):i.$remove(s)}else r.call(this)},update:function(e){var t,i=this;n.isArray(e)?(t=n.indexOf(e,i.el.getAttribute("value"))>-1,this.el.setAttribute("checked",t)):this.el.setAttribute("checked",e)}},radio:{eventType:"click",callback:r,update:function(e){var t=this,i=t.el.getAttribute("value");e==i?t.el.setAttribute("checked",!0):t.el.setAttribute("checked",!1)}},select:{eventType:"change",callback:r,update:function(e){for(var t,i,r,s=this,o=s.el,a=o.hasAttribute("multiple")&&n.isArray(e),l=o.childNodes,c=l.length;c--;)t=l[c],i=t.getAttribute("value"),r=a?indexOf(e,i)>-1:e==i,t.setAttribute("selected",r)}}};e.exports={priority:3e3,bind:function(e){var t,i,n=this,r=n.el.tagName.toUpperCase();if("INPUT"===r)t=s[n.el.getAttribute("type")]||s.text;else if("SELECT"===r)t=s.select;else{if("TEXTAREA"!==r)return;t=s.text}n.handler=t,n.callback=function(){n.handler.callback.call(n)},n.eventType=n.handler.eventType,n.view.on("afterMount",function(){i=n.el.getElement(),Util.bindEvent(i,n.eventType,n.callback)}),this.el.__vdm_model=this,this.update(e)},setValue:function(e,t,i){n.isString(t)&&(t='"'+t+'"');try{new Function("$scope","return $scope."+e+"="+t)(i),this.view.$rootView&&"dirtyCheck"==this.view.$rootView.__dataCheckType&&this.view.$rootView.$digest()}catch(r){}},forceUpdate:function(){this.__watcher&&this.update(this.__watcher.getValue())},update:function(e){void 0!==e&&null!==e||(e=""),this.curValue=e,this.handler.update.call(this,e)},unbind:function(){this.el.__vdm_model=null,Util.unbindEvent(this.el.getElement(),this.eventType,this.callback)}}},function(e,t,i){i(3);e.exports={block:!0,priority:4e3,shoudUpdate:function(e,t){return!0},bind:function(e){var t=this;t.oriEl=t.el.clone(),e?(t.childView=new t.view.constructor({el:t.el,data:t.view.$data,dataCheckType:this.view.$rootView.__dataCheckType,rootView:t.view.$rootView}),t.view.__rendered?t.childView.fire("afterMount"):t.view.on("afterMount",function(){t.childView.fire("afterMount")}),t.bound=!0):(t.el.remove(!0),t.bound=!1)},update:function(e){if(e&&0==this.bound){var t=this.oriEl.clone();return this.childView=new this.view.constructor({el:t,data:this.view.$data,dataCheckType:this.view.$rootView.__dataCheckType,rootView:this.view.$rootView}),this.el.replace(t),this.childView.fire("afterMount"),this.el=t,void(this.bound=!0)}return e||1!=this.bound?void("dirtyCheck"==this.view.$rootView.__dataCheckType&&this.childView&&this.childView.$digest()):(this.el.remove(!0),this.childView.$destroy(),this.childView=!1,void(this.bound=!1))},unbind:function(){this.childView&&this.childView.$destroy()}}},function(e,t,i){var n=i(3),r=i(15);e.exports=n.assign({},r,{bind:function(e){return r.bind.call(this,!e)},update:function(e){return r.update.call(this,!e)}})},function(e,t,i){var n=i(3),r=i(9),s=r.parseExpression,o=(i(18),i(1)),a={MOVE_EXISTING:1,REMOVE_NODE:2,INSERT_MARKUP:3},l=0;e.exports={block:!0,priority:4e3,shoudUpdate:function(e,t){var i="lazy"==this.describe.args[0];return i?e!==t:!0},initialize:function(){var e=this.describe.value.match(/(.*) in (.*)/);if(e){var t=e[1].match(/\((.*),(.*)\)/);t?(this.iterator=n.trim(t[1]),this.alias=n.trim(t[2])):(this.iterator=o.defaultIterator,this.alias=n.trim(e[1])),this.__watcher.expression=s(e[2])}this.isOption=this._isOption(),this.oldViewMap={},this.oldViewLists=[],this.__node=this.el.clone(),this._updateOrikeys()},_updateOrikeys:function(){this.orikeys=this.orikeys||[];var e=this.view.$data.__ori__||this.view.$data;for(var t in e)e.hasOwnProperty(t)&&!n.inArray(this.orikeys,t)&&this.orikeys.push(t)},_isOption:function(){var e=this.el.tagName.toUpperCase(),t=this.el.parentNode.tagName.toUpperCase();return("OPTION"===e||"OPTGROUP"===e)&&"SELECT"===t},bind:function(e){var t=this;this.startNode=this.el,this.startNode.remove(!0),this.isUpdated=!1,this.update(e),t.view.__rendered?t._fireChilds():t.view.on("afterMount",function(){t._fireChilds()})},_fireChilds:function(){n.each(this.oldViewLists,function(e){e.fire("afterMount")})},_generateKey:function(){return"key"+l++},_generateNewChildren:function(e){var t,i,r,s=this.newViewMap={},o=this.newViewLists=[],a=this.oldViewMap,l=this,c="__pat_key__";this._updateOrikeys(),n.each(e,function(e,u){r=e[c],r&&a[r]&&a[r].$data[l.alias]===e?(s[r]=a[r],l.iterator&&(a[r].$data[l.iterator]=u),"dirtyCheck"==l.view.$rootView.__dataCheckType&&(n.assign(a[r].$data,l.view.$data),a[r].$digest())):(t={},n.each(l.orikeys,function(e){t[e]=l.view.$data[e]}),l.iterator&&(t[l.iterator]=u),t[l.alias]=e,i=l.__node.clone(),r=l._generateKey(),e[c]=r,s[r]=new l.view.constructor({el:i,data:t,vid:r,dataCheckType:l.view.$rootView.__dataCheckType,rootView:l.view.$rootView}),s[r].orikeys=l.orikeys,"defineProperties"==l.view.$rootView.__dataCheckType&&l.view.__dependViews.push(s[r])),o.push(s[r])})},_diff:function(){for(var e,t,i,n=0,r=0,s=this.oldViewMap,o=this.newViewMap,l=this.newViewLists,c=this.diffQueue=[],u=0,h=l.length;h>u;u++)i=l[u].__vid,e=s&&s[i],t=l[u],e===t?e._mountIndex<r&&c.push({name:i,type:a.MOVE_EXISTING,fromIndex:e._mountIndex,toIndex:n}):(e&&(r=Math.max(e._mountIndex,r),c.push({name:i,type:a.REMOVE_NODE,fromIndex:e._mountIndex,toIndex:null})),c.push({name:i,type:a.INSERT_MARKUP,fromIndex:null,toIndex:n,markup:t.$el})),t._mountIndex=n,n++;for(i in s)!s.hasOwnProperty(i)||o&&o.hasOwnProperty(i)||(e=s&&s[i],c.push({name:i,type:a.REMOVE_NODE,fromIndex:e._mountIndex,toIndex:null}))},_patch:function(){for(var e,t,i=this,r={},s=[],o=this.diffQueue,l=0;l<o.length;l++)e=o[l],e.type!==a.MOVE_EXISTING&&e.type!==a.REMOVE_NODE||(t=this.oldViewMap[e.name],r[e.name]=t.$el,s.push(t));n.each(s,function(e){e.$el==i.startNode?e.$el.remove(!0):e.$el.remove(),n.findAndRemove(i.view.__dependViews,e),e.$destroy()});for(var c=this._generateOldLists(),u=0;u<o.length;u++)switch(e=o[u],e.type){case a.INSERT_MARKUP:this.handleInsertMarkup(e,c);break;case a.MOVE_EXISTING:this._insertChildAt.call(this,r[e.name],e.toIndex,c);break;case a.REMOVE_NODE:}},handleInsertMarkup:function(e,t){var i=this._insertChildAt;i.call(this,e.markup,e.toIndex,t),this.isUpdated&&this.newViewMap[e.name]&&this.newViewMap[e.name].fire("afterMount")},_generateOldLists:function(){var e=this.oldViewLists,t=[];return this.startNode.deleted&&t.push(this.startNode),n.each(e,function(e){e&&e.isDestroyed!==!0&&t.push(e.$el)}),t},_insertChildAt:function(e,t,i){var n=this.startNode,r=i[i.length-1];n.deleted&&(t+=1),nextNode=i[t],nextNode?(e.before(nextNode),i.splice(t,0,e)):(e.after(r),i.push(e))},update:function(e){this._generateNewChildren(e),this._diff(),this._patch(),this.oldViewMap=this.newViewMap,this.oldViewLists=this.newViewLists,this.oldViewLists.length>0&&this.startNode.deleted&&(this.startNode.remove(),this.startNode=this.oldViewLists[0].$el),this.isUpdated=!0,this.updateModel()},updateModel:function(){if(this.isOption){var e=this.startNode.parentNode,t=e&&e.__pat_model;t&&t.forceUpdate()}},unbind:function(){n.each(this.oldViewMap,function(e){e.$destroy()}),this.oldViewMap=null,this.oldViewLists=null}}},function(e,t,i){function n(e){return-1!=s.indexOf(["__ori__","__inject__","__pat_key__"],e)}function r(e){var t,i=null;return e?(i=e,s.isArray(e)?(i=[],s.each(e,function(e,t){i.push(r(e))})):s.isPlainObject(e)&&(t=e.__ori__||e,i={},s.each(t,function(t,s){n(s)||(i[s]=r(e[s]))})),i):e}var s=(i(19),i(3)),o=i(21);i(22);var a=0,l=function(e,t){var i=e[t];return function(){return i.addWatcher(),s.isArray(i.val)&&!i.val.__ob__&&(i.val.__inject__=!0,i.val.__ob__=i),s.isArray(i.val)&&i.val.__ob__&&i.val.__ob__!=i&&(i.val=i.val.slice(),i.val.__inject__=!0,i.val.__ob__=i),i.val}},c=function(e,i){var n=e[i];return function(e){e!==n.val&&(n.unique(),s.isObject(e)?(n.val=t.inject(e),n.depend()):n.val=e,n.notify())}},u=null;s.isIe8()?(window.execScript(["Function parseVB(code)","	ExecuteGlobal(code)","End Function"].join("\r\n"),"VBScript"),u=function(e){function t(e,t){f[e+"_set"]=t,h.push("	Public Property Let ["+e+"](value)",'		Call [_pro](me, "set", "'+e+'", value)',"	End Property","	Public Property Set ["+e+"](value)",'		Call [_pro](me, "set", "'+e+'", value)',"	End Property")}function i(e,t){f[e+"_get"]=t,h.push("	Public Property Get ["+e+"]","	On Error Resume Next","		Set ["+e+'] = [_pro](me, "get", "'+e+'")',"	If Err.Number <> 0 Then","		["+e+'] = [_pro](me, "get", "'+e+'")',"	End If","	On Error Goto 0","	End Property")}function r(e,t,i,n){return"get"==t?f[i+"_get"].apply(u,[n]):void f[i+"_set"].apply(u,[n])}var s,u,h=[],d=[],f={},p={},v={};for(var _ in e)e.hasOwnProperty&&!e.hasOwnProperty(_)||n(_)||(v[_]=new o,v[_].val=e[_],v[_].key=_,p[_]={enumerable:!0,configurable:!0,get:l(v,_),set:c(v,_)});for(var _ in p)p.hasOwnProperty(_)&&(p[_].set||p[_].get)&&(p[_].set&&t(_,p[_].set),p[_].get&&i(_,p[_].get));return h.push("	Public [__pat_key__]"),h.push("	Public [__ori__]"),h.push("	Public [__inject__]"),h.unshift("\r\n	Private [_pro]","	Public Default Function [self](proxy)","		Set [_pro] = proxy","		Set [self] = me","	End Function"),h.push("End Class"),h=h.join("\r\n"),s="VB"+a++,d.push("Class "+s+h),d.push(["Function "+s+"F(proxy)","	Set "+s+"F = (New "+s+")(proxy)","End Function"].join("\r\n")),d=d.join("\r\n"),window.parseVB(d),u=window[s+"F"](r),u.__ori__=e,u.__inject__=!0,u}):u=function(e){var t={},i={},r={};for(var s in e)e.hasOwnProperty(s)&&!n(s)&&(i[s]=new o,r[s]=e[s],i[s].val=r[s],i[s].key=s,t[s]={enumerable:!0,configurable:!0,get:l(i,s),set:c(i,s)});return Object.defineProperties(r,t),r.__ori__=e,r.__inject__=!0,r},t.define=u,t.normalize=r,t.inject=function(e,i){var n=null;if(e.__inject__){if(!i)return e;e=r(e)}if(s.isArray(e)){n=[],n.__inject__=!0;var o;return s.each(e,function(e){o=t.inject(e,i),n.push(o)}),n}return s.isPlainObject(e)?(n=t.define(e),s.each(e,function(e,r){s.isObject(e)&&(n[r]=t.inject(e,i))}),n):e}},function(e,t,i){function n(){return a++}function r(e,t,i){this.__directives=[],this.__view=e,this.expression=t,this.callbacks=i?[i]:[],this.scope=e.$data,this.last=null,this.current=null,this.__depend=!1,this.id=n()}var s=i(3),o=i(20),a=1;r.currentTarget=null,r.prototype._applyFilter=function(e,t){var i=this.__view.$rootView.__filters[t];return i?i.call(this.__view.$rootView,e,this.scope):e},r.prototype.applyFilter=function(e,t){if(!t)return e;for(var i=t.split(","),n=e,r=0;r<i.length;r++)n=this._applyFilter(n,i[r]);return n},r.prototype.getValue=function(){if(!this.expression)return"";var e;try{this.__depend||(r.currentTarget=this),e=new Function("_scope","_that","return "+this.expression)(this.scope,this),this.__depend||(r.currentTarget=null)}catch(t){this.__depend||(r.currentTarget=null)}return this.__depend=!0,e},r.prototype.check=function(){var e=this;this.isUserWatcher?(this.current=this.getValue(),this.last!=this.current&&s.each(this.callbacks,function(t){t(e.last,e.current)}),this.last=this.current):"defineProperties"==this.__view.$rootView.__dataCheckType?o.update(this):this.batchCheck()},r.prototype.batchCheck=function(){var e=this,t=this.last,i=this.current=this.getValue();s.each(this.__directives,function(n){n.shoudUpdate(t,i)&&(e.__view.$rootView.fire("beforeDirectiveUpdate",n,t,i),n.update&&n.update(i),e.__view.$rootView.fire("afterDirectiveUpdate",n,t,i))}),this.last=i},r.prototype.destroy=function(){this.isDestroyed=!0,s.each(this.__directives,function(e){e.destroy&&e.destroy()})},e.exports=r},function(e,t,i){function n(){a&&(l=!0,r.each(s,function(e){e.isDestroyed||e.batchCheck(),o[e.id]=null}),s=[],o={},a=l=!1)}var r=i(3),s=[],o={},a=!1,l=!1;t.update=function(e){var t=e.id;if(!o[t]){if(l)return void e.batchCheck();s.push(e),o[t]=s.length,a||(a=!0,r.nextTick(n))}},t.flushUpdate=n},function(e,t,i){var n=i(3),r=i(19),s=(i(18),n.Class),o=s.extend({init:function(){this.watchers=[]},addWatcher:function(){var e=r.currentTarget,t=this.watchers;e&&-1==n.indexOf(t,e)&&t.unshift(e)},unique:function(){var e=this.watchers,t=[];n.each(e,function(e){e.isDestroyed||t.push(e)}),this.watchers=t},depend:function(){var e=this.watchers;n.each(e,function(e){e.__depend=!1,e.getValue()})},notify:function(){n.each(this.watchers,function(e){e.check()})}});e.exports=o},function(e,t,i){var n=i(3),r=i(18),s=["push","pop","shift","unshift","splice","sort","reverse"],o=Array.prototype;n.each(s,function(e){var t=o[e];o[e]=function(){for(var i=arguments.length,n=new Array(i);i--;)n[i]=arguments[i];var s;return this.__ob__?("push"!=e&&"unshift"!=e||(n=r.inject(n)),"splice"==e&&(n=n.slice(0,2).concat(r.inject(n.slice(2)))),s=t.apply(this,n),this.__ob__.notify()):s=t.apply(this,n),s}}),o.$set=function(e,t){return e>=this.length&&(this.length=e+1),this.splice(e,1,t)[0]},o.$remove=function(e){if(this.length){var t=n.indexOf(this,e);return t>-1?this.splice(t,1):void 0}}},function(e,t,i){i(3);e.exports={priority:3e3,bind:function(e){this.describe.oneTime||(this.el.oneTime=!1),this.update(e)},update:function(e){void 0!==e&&null!==e||(e=""),this.el.html(e)},unbind:function(){}}},function(e,t,i){var n=(i(3),i(25),i(26));e.exports={block:!0,priority:3e3,bind:function(e){this.update(e)},update:function(e){void 0!==e&&null!==e||(e="");var t=n.transfer(e,!0);t.parentNode=this.el.parentNode,this.el.replace(t),this.el=t},unbind:function(){}}},function(e,t,i){function n(){return VDM_ID++}function r(e,t){return e.classList?e.classList.contains(t):e.className?u.indexOf(u.trim(e.className).split(/\s+/),t)>=0:void 0}function s(e,t){if(e.classList)e.classList.remove(t);else{for(var i=u.trim(e.className).split(/\s+/),n=i.length-1;n>=0;n--)i[n]==t&&i.splice(n,1);e.className=i.join(" ")}}function o(e,t){e.classList?e.classList.add(t):r(e,t)||(e.className+=" "+t)}function a(e,t){return-1!==u.indexOf(["value","checked","selected"],t)&&t in e?e[t]:void e.getAttribute(t)}function l(e){var t=i(8);return t.isBlockDirective(e)}function c(e){for(var t,i=[],n=0;n<e.length;n++)if(t=e[n],l(t.name)){i.push(t);break}return i}var u=i(3),h=u.Class,d=i(1),f={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0};VDM_ID=1,TAG_ID=d.tagId;var p={_normalizeDom:function(e){var t=[];return t=11==e.nodeType?u.toArray(e.childNodes)||[]:[e]},domBefore:function(e,t){var i=this._normalizeDom(e);this.view.$rootView.fire("beforeAddBlock",i,this),u.before(e,t),this.view.$rootView.fire("afterAddBlock",i,this)},domAfter:function(e,t){var i=this._normalizeDom(e);this.view.$rootView.fire("beforeAddBlock",i,this),u.after(e,t),this.view.$rootView.fire("afterAddBlock",i,this)},domReplace:function(e,t){var i=this._normalizeDom(t),n=this._normalizeDom(e);this.view.$rootView.fire("beforeAddBlock",i,this),this.view.$rootView.fire("beforeDeleteBlock",n,this),u.replace(e,t),this.view.$rootView.fire("afterDeleteBlock",n,this),this.view.$rootView.fire("afterAddBlock",i,this)},domRemove:function(e){var t=this._normalizeDom(e);this.view.$rootView.fire("beforeDeleteBlock",t,this),u.remove(e),this.view.$rootView.fire("afterDeleteBlock",t,this);
}},v=h.extend(p,{__VD__:!0,init:function(){},mountView:function(e){var t,i;return i=this,i.view=e,i.mountId(),t=this.deleted?i.mountDeleted(e):i.mountHtml(e)},mountDeleted:function(){return"<!--deleted-"+this.vdmId+"-->"},mountHtml:function(){return""},mountId:function(){this.vdmId||(this.vdmId=n())},_findAndSplice:function(e,t){var i=this.childNodes;i&&u.each(i,function(n,r){n==e&&(e.parentNode=this,t?i.splice(r,1,t):i.splice(r,1))})},getElement:function(){var e=this;if(e.vdmId&&e.view)return e.element?e.element:(e.element=u.queryRealDom(e),e.element)},clone:function(e){var t,i=null;i=u.deepClone(this.options,function(e){return"childNodes"==e});var n=new this.constructor(i);return n.parentNode=e||this.parentNode,this.options.childNodes&&(t=[],u.each(this.options.childNodes,function(e){t.push(e.clone(n))}),i.childNodes=t,n.childNodes=t),n},pre:function(e){var t,i,n,r=this.parentNode.childNodes;if(r&&0!=r.length&&(n=u.indexOf(r,this),-1!=n)){for(var s=n-1;s>0;s--)if(i=r[s],e||!e&&!i.deleted){t=i;break}return t}},next:function(e){var t,i,n,r=this.parentNode.childNodes;if(r&&0!=r.length&&(n=u.indexOf(r,this),-1!=n)){for(var s=n+1;s<r.length;s++)if(i=r[s],e||!e&&!i.deleted){t=i;break}return t}},replace:function(e){this.deleted||this.remove(!0);var t=this.getElement();if(this.parentNode._findAndSplice(this,e),t){if(e.getElement())if(-1==e.nodeType){for(var i=0,n=e.childNodes.length;n>i;i++)this.domBefore(e.childNodes[i].getElement(),this.getElement());this.domRemove(this.getElement())}else this.domReplace(this.getElement(),e.getElement());else{var r=e.mountView(this.view),s=u.string2frag(r);this.domBefore(s,this.getElement()),this.domRemove(this.getElement())}return e}},before:function(e){var t=e.parentNode.childNodes,i=u.indexOf(t,e);if(e.parentNode.childNodes.splice(i,0,this),this.parentNode=e.parentNode,e.getElement()){var n=-1==e.nodeType?e.endElement:e.getElement();if(this.getElement())if(-1==this.nodeType)for(var r=0,s=this.childNodes.length;s>r;r++)this.domBefore(this.childNodes[r].getElement(),n);else this.domBefore(this.element,n);else{var o=this.mountView(e.view),a=u.string2frag(o);this.domBefore(a,e.getElement())}}},after:function(e){var t=e.parentNode.childNodes,i=u.indexOf(t,e)+1;if(e.parentNode.childNodes.splice(i,0,this),this.parentNode=e.parentNode,e.getElement()){var n=-1==e.nodeType?e.endElement:e.getElement();if(this.getElement())if(-1==this.nodeType)for(var r=0,s=this.childNodes.length;s>r;r++)this.domAfter(this.childNodes[r].getElement(),n);else this.domAfter(this.element,n);else{var o=this.mountView(e.view),a=u.string2frag(o);this.domAfter(a,n)}}},remove:function(e){var t=this.getElement();if(e?this.deleted=!0:this.parentNode._findAndSplice(this),t)if(e){var i=u.string2node(this.mountDeleted());this.domReplace(t,i),this.element=i}else this.domRemove(t)}}),_=v.extend({init:function(e){this.options=e,this.attributes=e.attributes,this.tagName=e.tagName,this.childNodes=e.childNodes,this.hasBlock=e.hasBlock,this.nodeType=1},hasChildNodes:function(){return this.childNodes&&this.childNodes.length&&this.childNodes.length>0},first:function(){return this.childNodes[0]},last:function(){return this.childNodes[this.childNodes.length-1]},hasClass:function(e){var t=u.indexOfKey(this.attributes,"name","class");if(-1==t)return!1;var i=this.attributes[t].value,n=u.trim(i).split(/\s+/);return-1!=u.indexOf(n,e)},addClass:function(e){if(e){var t=this.getAttribute("class");t+=" "+e;var i=u.indexOfKey(this.attributes,"name","class"),n={name:"class",value:t};-1!==i?this.attributes[i]=n:this.attributes.push(n),this.getElement()&&o(this.getElement(),e)}},removeClass:function(e){var t=u.indexOfKey(this.attributes,"name","class");if(-1!=t){var i=this.attributes[t].value,n=u.trim(i).split(/\s+/);u.findAndRemove(n,e),this.attributes[t].value=n.join(" "),this.getElement()&&s(this.getElement(),e)}},hasAttribute:function(e){return""!=this.getAttribute(e)},getAttribute:function(e){var t=u.indexOfKey(this.attributes,"name",e);return-1!==t?this.attributes[t].value:""},setAttribute:function(e,t){void 0!==t&&null!==t||(t="");var i=u.indexOfKey(this.attributes,"name",e),n={name:e,value:t};if(-1!==i?this.attributes[i]=n:this.attributes.push(n),this.getElement()){var r=this.getElement();a(r,e)!==t&&(this.view.$rootView.fire("beforeUpdateAttribute",[r],this),-1!==u.indexOf(["value","checked","selected"],e)&&e in r?r[e]="value"===e?t||"":t:r.setAttribute(e,t),this.view.$rootView.fire("afterUpdateAttribute",[r],e,t,this))}},removeAttribute:function(e){var t=u.indexOfKey(this.attributes,"name",e);if(-1!==t&&this.attributes.splice(t,1),this.getElement()){var i=this.getElement();this.view.$rootView.fire("beforeRemoveAttribute",[i],e,this),i.removeAttribute(e),this.view.$rootView.fire("afterRemoveAttribute",[i],e,this)}},mountHtml:function(e){var t,i,n=this.tagName,r="";if(u.each(this.attributes,function(e){0!=e.name.indexOf(d.prefix+"-")&&(i=e.value,("checked"!=e.name&&"selected"!=e.name||void 0===i||i)&&(u.isString(i)&&(i='"'+i.replace(/"/g,"&quot;")+'"'),t=void 0===i?e.name:e.name+"="+i,r+=" "+t+" "))}),r+=" "+TAG_ID+'="'+this.vdmId+'"',f[n])return"<"+n+r+" />";if("TEXTAREA"==n.toUpperCase())return"<"+n+r+">"+this.getAttribute("value")+"</"+n+">";var s="";return u.each(this.childNodes,function(t){s+=t.mountView(e)}),"<"+n+r+">"+s+"</"+n+">"}}),m=_.extend({init:function(e){this.options=e,this.nodeType=-1,this.tagName=e.tagName,this.attributes=e.attributes,this.childNodes=e.childNodes,this.hasBlock=e.hasBlock},mountHtml:function(e){var t="";return u.each(this.childNodes,function(i){t+=i.mountView(e)}),t},getElement:function(){if(this.vdmId&&this.view){if(this.element)return this.element;if(this.deleted)return this.element=u.queryRealDom(this),this.element;var e=this.first().getElement(),t=this.last().getElement();return e&&(this.element=e),t&&(this.endElement=t),e}},remove:function(e){var t=this.getElement();if(e?this.deleted=!0:this.parentNode._findAndSplice(this),t){this.childNodes;if(e){var i=u.string2node(this.mountDeleted());this.domReplace(t,i),this.element=i}for(;this.childNodes.length;)this.childNodes[0].remove()}},hasChildNodes:function(){return this.childNodes&&this.childNodes.length&&this.childNodes.length>0}}),g=v.extend({init:function(e){this.options=e,this.data=e.data,this.nodeType=3,this.oneTime=!0},html:function(e){void 0!==e&&null!==e||(e=""),u.isString(e)&&(e=u.htmlspecialchars(e)),this.data=e,this.getElement()&&(this.getElement().innerHTML=e)},mountHtml:function(e){var t=this.parentNode,i=-1==t.nodeType&&t.first()===this,n=-1==t.nodeType&&t.last()===this;return!this.oneTime||i||n?"<span "+TAG_ID+'="'+this.vdmId+'">'+this.data+"</span>":this.data}});e.exports={createRoot:function(e,t){var i=new m({tagName:"template",attributes:[],childNodes:e,hasBlock:!1});return t||(i.__ROOT__=!0),e&&u.each(e,function(e){e.parentNode=i}),i},createElement:function(e,t,i){var n=[],r=!1;i=i||[],u.each(t,function(e,t){n.push({name:t,value:e}),l(t)&&(r=!0)});var s=null;if("template"==e){if(n=c(n),i&&1==i.length&&1==i[0].nodeType&&!i[0].hasBlock)return i[0].options.attributes=i[0].attributes=i[0].attributes.concat(n),i[0].options.hasBlock=i[0].hasBlock=!0,i[0];if(!i||0==i.length)return;s=new m({tagName:e,attributes:n,childNodes:i,hasBlock:r})}else s=new _({tagName:e,attributes:n,childNodes:i,hasBlock:r});return i&&u.each(i,function(e){e.parentNode=s}),s.hasBlock=r,s},createTextNode:function(e){return e||(e=""),new g({data:e})}}},function(e,t,i){function n(e,t){var i=0;t.replace(HTML_TAG_REG,function(n,s,a,l){return l>i&&r(e,t.slice(i,l)),e.push({tagName:s.toLowerCase()}),e.end++,/<\/\w+/.test(n)?e[e.end].isEnd=!0:""!==a&&(e[e.end].attrs=o(a)),i=l+n.length,n}),i!=t.length&&r(e,t.slice(i))}function r(e,t){if(t=t.replace(/^[\n\s\t]+/g,"").replace(/[\n\s\t]+$/g,"")){var i=s(t);c.each(i,function(t){e.push({tagName:TEXT_NODE,text:t}),e.end++})}}function s(e){if(!TAG_RE.test(e))return[e];for(var t,i,n=[],r=TAG_RE.lastIndex=0;t=TAG_RE.exec(e);)i=t.index,i>r&&n.push(e.slice(r,i)),n.push(t[0]),r=i+t[0].length;return r<e.length&&n.push(e.slice(r)),n}function o(e){var t,i,n,r,s={};return t=e.match(ATTRIBUTE_REG),c.each(t,function(e){r=e.indexOf("="),~r?(i=e.slice(0,r),n=c.trim(e.slice(r+1).replace(/^('|")/,"").replace(/('|")$/,""))):(i=e,n=void 0),s[c.trim(i)]=n}),s}function a(e,t,i){for(var n,r,s={found:[]},o=t;o>=0;o--)if(e[o].isEnd){if(n=a(e,o-1,e[o]),!n.close_tag,!1)return void c.error(e[o].tagName+" does not have correspond start tag.");if(n.close_tag.paired=!0,o=n.latest_pointer,0!=n.found.length&&(n.close_tag.children=n.found),"TEXTAREA"==n.close_tag.tagName.toUpperCase()){var l="";c.each(n.close_tag.children,function(e){return!e.data,void(l+=e.data)}),n.close_tag.attrs.value=l,n.close_tag.children=[]}r=m(n.close_tag.tagName,n.close_tag.attrs,n.close_tag.children),r&&s.found.unshift(r)}else{if(void 0!=i&&e[o].tagName==i.tagName){s.close_tag=e[o],s.latest_pointer=o;break}e[o].tagName===TEXT_NODE?s.found.unshift(g(e[o].text)):(r=m(e[o].tagName,e[o].attrs),r&&s.found.unshift(r))}return void 0===s.latest_pointer&&(s.latest_pointer=o+1),s}function l(e){var t=e+"";return t=t.replace(HTML_COMMENT_REG,""),t=t.replace(p,'<template t-$1="$2">'),t=t.replace(v,'<template t-$1="!($2)">'),t=t.replace(_,"</template>")}var c=i(3),u=i(9),h=i(25),d=i(1),f=d.delimiters,p=(d.unsafeDelimiters,new RegExp(f[0]+"\\#([^(]*)\\((.*?)\\)"+f[1],"g")),v=new RegExp(f[0]+"\\^([^(]*)\\((.*?)\\)"+f[1],"g"),_=new RegExp(f[0]+"\\/(.*?)"+f[1],"g"),m=h.createElement,g=h.createTextNode,w=h.createRoot;TAG_RE=u.TAG_RE,TEXT_NODE="text",ATTRIBUTE_REG=/(?:[\w-:]+)(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s]*))?/g,HTML_TAG_REG=/<\/?(\w+)((?:\s+(?:[\w-:]+)(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s]*))?)+\s*|\s*)\/?\>/g,HTML_COMMENT_REG=/<!--(.|\s)*?-->/g,t.transfer=function(e){if(c.isObject(e)&&e.__VD__)return e;if(""==e)return w([g("")],!1);e=l(e);var t,i,r=[];return r.end=-1,n(r,e),t=a(r,r.length-1),i=w(t.found)}},function(e,t,i){var n=i(3);e.exports={on:function(e,t){return this.__events||(this.__events={}),this.__events[e]||(this.__events[e]=[]),-1===n.indexOf(this.__events,t)&&"function"==typeof t&&this.__events[e].push(t),this},fire:function(e){if(this.__events&&this.__events[e]){var t=Array.prototype.slice.call(arguments,1)||[],i=this.__events[e],n=0,r=i.length;for(n;r>n;n++)i[n].apply(this,t);return this}},off:function(e,t){if(e||t||(this.__events={}),e&&!t&&delete this.__events[e],e&&t)var i=this.__events[e],r=n.indexOf(i,t)(r>-1)&&i.splice(r,1);return this}}}])});